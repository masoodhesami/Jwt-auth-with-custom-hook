{"ast":null,"code":"import React from \"react\";\nimport axios from 'axios';\n\nfunction useJWT() {\n  const refreshToken = async () => {\n    const result = await axios.post(\"http://127.0.0.1:4000/api/token\", {\n      token: localStorage.getItem(\"refresh\")\n    });\n    localStorage.setItem(\"access\", result.data.access);\n    localStorage.setItem(\"refresh\", result.data.refresh);\n    return result.data;\n  };\n\n  async function login(email, password) {\n    const result = await axios.post(\"http://127.0.0.1:4000/api/login\", {\n      email: email,\n      password: password\n    });\n    localStorage.setItem(\"access\", result.data.access);\n    localStorage.setItem(\"refresh\", result.data.refresh);\n    return result.data;\n  }\n\n  const sendPostRequest = async (url, data) => {\n    try {\n      return await axios.post(url, {\n        headers: {\n          \"jwt\": data\n        }\n      });\n    } catch (err) {}\n  };\n\n  const logout = async () => {\n    await axios.delete(\"http://127.0.0.1:4000/api/logout\", {\n      token: localStorage.getItem(\"refresh\")\n    });\n    localStorage.removeItem(\"access\");\n    localStorage.removeItem(\"refresh\");\n  };\n\n  return {\n    login,\n    logout,\n    refreshToken,\n    sendPostRequest\n  };\n}\n\nexport default useJWT;","map":{"version":3,"sources":["E:/react/quera/jwt-auth/src/Hooks/useJWT.js"],"names":["React","axios","useJWT","refreshToken","result","post","token","localStorage","getItem","setItem","data","access","refresh","login","email","password","sendPostRequest","url","headers","err","logout","delete","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,SAASC,MAAT,GAAkB;AACd,QAAMC,YAAY,GAAG,YAAY;AAC7B,UAAMC,MAAM,GAAG,MAAMH,KAAK,CAACI,IAAN,CAAW,iCAAX,EAA8C;AAC/DC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB;AADwD,KAA9C,CAArB;AAGAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,QAArB,EAA+BL,MAAM,CAACM,IAAP,CAAYC,MAA3C;AACAJ,IAAAA,YAAY,CAACE,OAAb,CAAqB,SAArB,EAAgCL,MAAM,CAACM,IAAP,CAAYE,OAA5C;AACA,WAAOR,MAAM,CAACM,IAAd;AACH,GAPD;;AASA,iBAAeG,KAAf,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AAClC,UAAMX,MAAM,GAAG,MAAMH,KAAK,CAACI,IAAN,CAAW,iCAAX,EAA8C;AAC/DS,MAAAA,KAAK,EAAEA,KADwD;AAE/DC,MAAAA,QAAQ,EAAEA;AAFqD,KAA9C,CAArB;AAIAR,IAAAA,YAAY,CAACE,OAAb,CAAqB,QAArB,EAA+BL,MAAM,CAACM,IAAP,CAAYC,MAA3C;AACAJ,IAAAA,YAAY,CAACE,OAAb,CAAqB,SAArB,EAAgCL,MAAM,CAACM,IAAP,CAAYE,OAA5C;AACA,WAAOR,MAAM,CAACM,IAAd;AAEH;;AAED,QAAMM,eAAe,GAAG,OAAOC,GAAP,EAAYP,IAAZ,KAAqB;AACzC,QAAI;AACA,aAAO,MAAMT,KAAK,CAACI,IAAN,CAAWY,GAAX,EAAgB;AACzBC,QAAAA,OAAO,EAAE;AACL,iBAAOR;AADF;AADgB,OAAhB,CAAb;AAKH,KAND,CAME,OAAOS,GAAP,EAAY,CAEb;AACJ,GAVD;;AAYA,QAAMC,MAAM,GAAG,YAAY;AACvB,UAAMnB,KAAK,CAACoB,MAAN,CAAa,kCAAb,EAAiD;AACnDf,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB;AAD4C,KAAjD,CAAN;AAGAD,IAAAA,YAAY,CAACe,UAAb,CAAwB,QAAxB;AACAf,IAAAA,YAAY,CAACe,UAAb,CAAwB,SAAxB;AAEH,GAPD;;AASA,SAAO;AACHT,IAAAA,KADG;AAEHO,IAAAA,MAFG;AAGHjB,IAAAA,YAHG;AAIHa,IAAAA;AAJG,GAAP;AAMH;;AAED,eAAed,MAAf","sourcesContent":["import React from \"react\";\nimport axios from 'axios'\n\n\nfunction useJWT() {\n    const refreshToken = async () => {\n        const result = await axios.post(\"http://127.0.0.1:4000/api/token\", {\n            token: localStorage.getItem(\"refresh\")\n        });\n        localStorage.setItem(\"access\", result.data.access);\n        localStorage.setItem(\"refresh\", result.data.refresh);\n        return result.data;\n    };\n\n    async function login(email, password) {\n        const result = await axios.post(\"http://127.0.0.1:4000/api/login\", {\n            email: email,\n            password: password\n        });\n        localStorage.setItem(\"access\", result.data.access)\n        localStorage.setItem(\"refresh\", result.data.refresh);\n        return result.data;\n\n    }\n\n    const sendPostRequest = async (url, data) => {\n        try {\n            return await axios.post(url, {\n                headers: {\n                    \"jwt\": data\n                }\n            });\n        } catch (err) {\n\n        }\n    };\n\n    const logout = async () => {\n        await axios.delete(\"http://127.0.0.1:4000/api/logout\", {\n            token: localStorage.getItem(\"refresh\")\n        })\n        localStorage.removeItem(\"access\");\n        localStorage.removeItem(\"refresh\");\n\n    };\n\n    return {\n        login,\n        logout,\n        refreshToken,\n        sendPostRequest,\n    };\n}\n\nexport default useJWT;\n"]},"metadata":{},"sourceType":"module"}