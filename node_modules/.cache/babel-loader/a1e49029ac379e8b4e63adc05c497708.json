{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from 'axios';\nimport { useNavigate } from \"react-router-dom\";\n\nfunction useJWT() {\n  _s();\n\n  const navigate = useNavigate();\n\n  const refreshToken = async () => {\n    const result = await axios.post(\"http://127.0.0.1:4000/api/token\", {\n      token: localStorage.getItem(\"refresh\")\n    });\n    localStorage.setItem(\"access\", result.data.access);\n    localStorage.setItem(\"refresh\", result.data.refresh);\n    return result.data;\n  };\n\n  async function login(email, password) {\n    const result = await axios.post(\"http://127.0.0.1:4000/api/login\", {\n      email: email,\n      password: password\n    });\n    localStorage.setItem(\"access\", result.data.access);\n    localStorage.setItem(\"refresh\", result.data.refresh);\n\n    if (result.data) {\n      navigate(\"/\");\n    }\n\n    return result.data;\n  }\n\n  const sendPostRequest = async (url, data) => {\n    try {\n      return await axios.post(url, data, {\n        headers: {\n          \"jwt\": data.access\n        }\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const logout = async () => {\n    await axios.delete(\"http://127.0.0.1:4000/api/logout\", {\n      token: localStorage.getItem(\"refresh\")\n    });\n    localStorage.removeItem(\"access\");\n    localStorage.removeItem(\"refresh\");\n  };\n\n  return {\n    login,\n    logout,\n    refreshToken,\n    sendPostRequest\n  };\n}\n\n_s(useJWT, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n\nexport default useJWT;","map":{"version":3,"sources":["E:/react/quera/jwt-auth/src/Hooks/useJWT.js"],"names":["React","axios","useNavigate","useJWT","navigate","refreshToken","result","post","token","localStorage","getItem","setItem","data","access","refresh","login","email","password","sendPostRequest","url","headers","err","console","log","logout","delete","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;;AAGA,SAASC,MAAT,GAAkB;AAAA;;AACd,QAAMC,QAAQ,GAAGF,WAAW,EAA5B;;AACA,QAAMG,YAAY,GAAG,YAAY;AAC7B,UAAMC,MAAM,GAAG,MAAML,KAAK,CAACM,IAAN,CAAW,iCAAX,EAA8C;AAC/DC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB;AADwD,KAA9C,CAArB;AAGAD,IAAAA,YAAY,CAACE,OAAb,CAAqB,QAArB,EAA+BL,MAAM,CAACM,IAAP,CAAYC,MAA3C;AACAJ,IAAAA,YAAY,CAACE,OAAb,CAAqB,SAArB,EAAgCL,MAAM,CAACM,IAAP,CAAYE,OAA5C;AACA,WAAOR,MAAM,CAACM,IAAd;AACH,GAPD;;AASA,iBAAeG,KAAf,CAAqBC,KAArB,EAA4BC,QAA5B,EAAsC;AAClC,UAAMX,MAAM,GAAG,MAAML,KAAK,CAACM,IAAN,CAAW,iCAAX,EAA8C;AAC/DS,MAAAA,KAAK,EAAEA,KADwD;AAE/DC,MAAAA,QAAQ,EAAEA;AAFqD,KAA9C,CAArB;AAIAR,IAAAA,YAAY,CAACE,OAAb,CAAqB,QAArB,EAA+BL,MAAM,CAACM,IAAP,CAAYC,MAA3C;AACAJ,IAAAA,YAAY,CAACE,OAAb,CAAqB,SAArB,EAAgCL,MAAM,CAACM,IAAP,CAAYE,OAA5C;;AACA,QAAIR,MAAM,CAACM,IAAX,EAAiB;AACbR,MAAAA,QAAQ,CAAC,GAAD,CAAR;AACH;;AACD,WAAOE,MAAM,CAACM,IAAd;AAEH;;AAED,QAAMM,eAAe,GAAG,OAAOC,GAAP,EAAYP,IAAZ,KAAqB;AACzC,QAAI;AACA,aAAO,MAAMX,KAAK,CAACM,IAAN,CAAWY,GAAX,EAAgBP,IAAhB,EAAsB;AAC/BQ,QAAAA,OAAO,EAAE;AACL,iBAAOR,IAAI,CAACC;AADP;AADsB,OAAtB,CAAb;AAKH,KAND,CAME,OAAOQ,GAAP,EAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AACJ,GAVD;;AAYA,QAAMG,MAAM,GAAG,YAAY;AACvB,UAAMvB,KAAK,CAACwB,MAAN,CAAa,kCAAb,EAAiD;AACnDjB,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB;AAD4C,KAAjD,CAAN;AAGAD,IAAAA,YAAY,CAACiB,UAAb,CAAwB,QAAxB;AACAjB,IAAAA,YAAY,CAACiB,UAAb,CAAwB,SAAxB;AAEH,GAPD;;AASA,SAAO;AACHX,IAAAA,KADG;AAEHS,IAAAA,MAFG;AAGHnB,IAAAA,YAHG;AAIHa,IAAAA;AAJG,GAAP;AAMH;;GApDQf,M;UACYD,W;;;AAqDrB,eAAeC,MAAf","sourcesContent":["import React from \"react\";\nimport axios from 'axios'\nimport {useNavigate} from \"react-router-dom\"\n\n\nfunction useJWT() {\n    const navigate = useNavigate();\n    const refreshToken = async () => {\n        const result = await axios.post(\"http://127.0.0.1:4000/api/token\", {\n            token: localStorage.getItem(\"refresh\")\n        });\n        localStorage.setItem(\"access\", result.data.access);\n        localStorage.setItem(\"refresh\", result.data.refresh);\n        return result.data;\n    };\n\n    async function login(email, password) {\n        const result = await axios.post(\"http://127.0.0.1:4000/api/login\", {\n            email: email,\n            password: password\n        });\n        localStorage.setItem(\"access\", result.data.access)\n        localStorage.setItem(\"refresh\", result.data.refresh);\n        if (result.data) {\n            navigate(\"/\");\n        }\n        return result.data;\n\n    }\n\n    const sendPostRequest = async (url, data) => {\n        try {\n            return await axios.post(url, data, {\n                headers: {\n                    \"jwt\": data.access\n                }\n            });\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    const logout = async () => {\n        await axios.delete(\"http://127.0.0.1:4000/api/logout\", {\n            token: localStorage.getItem(\"refresh\")\n        })\n        localStorage.removeItem(\"access\");\n        localStorage.removeItem(\"refresh\");\n\n    };\n\n    return {\n        login,\n        logout,\n        refreshToken,\n        sendPostRequest,\n    };\n}\n\nexport default useJWT;\n"]},"metadata":{},"sourceType":"module"}